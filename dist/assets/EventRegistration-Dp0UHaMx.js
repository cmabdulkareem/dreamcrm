import{D as $,r as o,j as e,C as g,x as N,d as h,c as y,y as c}from"./index-CfT7qPI5.js";const F=()=>{const{link:d}=$(),[a,j]=o.useState(null),[w,k]=o.useState(!0),[m,b]=o.useState(!1),[E,D]=o.useState(!1),[l,p]=o.useState({}),[i,f]=o.useState({}),C=async()=>{try{const t=await y.get(`${h}/events/public/${d}`);j(t.data.event);const r={};t.data.event.registrationFields.forEach(n=>{r[n.fieldName]=""}),p(r)}catch(t){console.error("Error fetching event:",t),c.error("Event not found or is no longer active")}finally{k(!1)}};o.useEffect(()=>{C()},[d]);const x=(t,r)=>{p(n=>({...n,[t]:r})),i[t]&&f(n=>({...n,[t]:""}))},L=()=>{const t={};return a.registrationFields.forEach(r=>{r.isRequired&&(!l[r.fieldName]||l[r.fieldName].trim()==="")&&(t[r.fieldName]="This field is required")}),f(t),Object.keys(t).length===0},R=async t=>{var r,n;if(t.preventDefault(),!L()){c.error("Please fill in all required fields");return}b(!0);try{const s=[];Object.keys(l).forEach(v=>{s.push({fieldName:v,fieldValue:l[v]})});const u=l["Full Name"]||"",S=l.Email||"";await y.post(`${h}/events/register/${d}`,{registrantName:u,registrantEmail:S,registrationData:s}),D(!0),c.success("Registration successful!")}catch(s){console.error("Registration error:",s),c.error(((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||"Registration failed. Please try again.")}finally{b(!1)}};return w?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?E?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(g,{className:"shadow-lg text-center p-8",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-green-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Thank You for Registering!"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You have successfully registered for ",e.jsx("span",{className:"font-semibold",children:a.eventName}),"."]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"We look forward to seeing you at the event."}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 rounded-lg p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Event Details"}),e.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(a.eventDate).toLocaleDateString()," at ",new Date(a.eventDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsx(N,{position:"top-center",className:"!z-[999999]",style:{zIndex:999999}})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(g,{className:"shadow-lg",children:[a.bannerImage&&e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"w-full aspect-video overflow-hidden rounded-lg",children:e.jsx("img",{src:`${h.replace("/api","")}${a.bannerImage}`,alt:"Event Banner",className:"w-full h-full object-cover",onError:t=>{t.target.onerror=null,t.target.parentElement.parentElement.style.display="none"}})})}),e.jsx("div",{className:"text-center mb-8",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Event Registration Form"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:a.eventName}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:a.eventDescription}),e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-full dark:bg-blue-900 dark:text-blue-100",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),e.jsxs("span",{className:"font-medium",children:[new Date(a.eventDate).toLocaleDateString()," at ",new Date(a.eventDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-6",children:a.registrationFields.map((t,r)=>{var n;return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t.fieldName,t.isRequired&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.fieldType==="textarea"?e.jsx("textarea",{value:l[t.fieldName]||"",onChange:s=>x(t.fieldName,s.target.value),rows:"3",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${i[t.fieldName]?"border-red-500":"border-gray-300"}`,placeholder:`Enter your ${t.fieldName.toLowerCase()}`}):t.fieldType==="select"?e.jsxs("select",{value:l[t.fieldName]||"",onChange:s=>x(t.fieldName,s.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${i[t.fieldName]?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select an option"}),(n=t.options)==null?void 0:n.map((s,u)=>e.jsx("option",{value:s,children:s},u))]}):e.jsx("input",{type:t.fieldType,value:l[t.fieldName]||"",onChange:s=>x(t.fieldName,s.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${i[t.fieldName]?"border-red-500":"border-gray-300"}`,placeholder:`Enter your ${t.fieldName.toLowerCase()}`}),i[t.fieldName]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i[t.fieldName]})]},r)})}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{type:"submit",disabled:m,className:`w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${m?"opacity-75 cursor-not-allowed":""}`,children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Registering..."]}):"Register for Event"})})]})]}),e.jsx(N,{position:"top-center",className:"!z-[999999]",style:{zIndex:999999}})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs(g,{className:"text-center p-8",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Event Not Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"The event you're looking for doesn't exist or is no longer active."})]})})};export{F as default};
