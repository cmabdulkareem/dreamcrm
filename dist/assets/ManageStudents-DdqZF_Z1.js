import{a as Ta,r,A as $a,u as Ma,k as La,b as L,c as C,y as u,j as a,P as Ua,E as Ba,I as o,H as d,$ as He,B as m,C as _a,m as qa,M as Xe,x as n,X as Ye,Y as Qe,Z as Va,_ as we,a0 as za,n as Ra}from"./index-BNEGGE57.js";import{S as Ga}from"./StudentProfileModal-D1ddp5oS.js";import{D as ke}from"./date-picker-BeppTpDh.js";import{S as ea}from"./SearchableCourseSelect-05YrRIZR.js";import"./index-B_JH6AFf.js";import"./calender-line-DQbsZUHO.js";import"./chevron-down-BH7m1aFk.js";function at(){const aa=Ta(),{user:h}=r.useContext($a),{addNotification:ta,areToastsEnabled:sa}=Ma(),Q=h&&La(h),[ra,Pe]=r.useState([]),[De,ee]=r.useState(!0),[ae,U]=r.useState(!1),[la,B]=r.useState(null),[l,te]=r.useState(!1),[na,Ae]=r.useState(!1),[ia,oa]=r.useState(null),[j,_]=r.useState(!1),[da,S]=r.useState(!1),[q,ca]=r.useState(null),[se,Ee]=r.useState(""),[f,xa]=r.useState(""),[w,ua]=r.useState(""),[k,ma]=r.useState(""),[y,ha]=r.useState(""),[b,Fe]=r.useState(1),V=10,[P,z]=r.useState(""),[D,re]=r.useState(""),[R,le]=r.useState(""),[Oe,ne]=r.useState(""),[Ie,ie]=r.useState(""),[Te,oe]=r.useState(""),[A,E]=r.useState("Kasaragod"),[G,F]=r.useState(""),[Z,de]=r.useState(""),[O,ce]=r.useState(""),[$e,J]=r.useState(null),[xe,K]=r.useState(""),[Me,ue]=r.useState(""),[Le,me]=r.useState(""),[p,he]=r.useState(""),[g,I]=r.useState([]),[W,T]=r.useState(""),[H,v]=r.useState(""),[X,pe]=r.useState(""),[Ue,Be]=r.useState(""),[N,ge]=r.useState("normal"),[fe,Y]=r.useState(""),[$,pa]=r.useState([]),[_e,ga]=r.useState([]),[i,je]=r.useState({}),[Za,Ja]=r.useState(!1),qe=r.useRef(null);r.useEffect(()=>{ye(),fa(),ja()},[]);const fa=async()=>{try{const e=await L.get(`${C}/courses/all`,{withCredentials:!0});pa(e.data.courses)}catch(e){console.error("Error fetching courses:",e)}},ja=async()=>{try{const e=await L.get(`${C}/brands`,{withCredentials:!0});ga(e.data.brands||[])}catch(e){console.error("Error fetching brands:",e)}},ye=async()=>{try{ee(!0);const e=await L.get(`${C}/students/all`,{withCredentials:!0});Pe(e.data.students),ee(!1)}catch(e){console.error("Error fetching students:",e),Pe([{_id:"1",studentId:"STU001",fullName:"John Doe",email:"john@example.com",phone1:"+1 234 567 8900",coursePreference:"Graphic Design",enrollmentDate:"2025-01-15",status:"Active",photo:null},{_id:"2",studentId:"STU002",fullName:"Jane Smith",email:"jane@example.com",phone1:"+1 234 567 8901",coursePreference:"Interior Design",enrollmentDate:"2025-01-20",status:"Active",photo:null}]),u.info("Using demo data for demonstration"),ee(!1)}},ya=()=>{aa("/new-student")},ba=e=>{oa(e),Ae(!0)},va=e=>{var s;B(e),z(e.fullName||""),re(e.email||""),le(e.phone1||""),ne(e.phone2||""),ie(e.gender||""),oe(e.dob?new Date(e.dob).toISOString().split("T")[0]:"");const t=we.map(x=>x.value);e.place&&!t.includes(e.place)&&e.place!=="Other"?(E("Other"),F(e.place)):(E(e.place||"Kasaragod"),F(e.otherPlace||"")),de(e.address||""),ce(e.aadharCardNumber||""),J(null),K(e.photo?ve(e.photo):""),ue(e.status||""),me(e.education||""),he(e.coursePreference||""),I(e.additionalCourses||[]),T(e.discountPercentage||0),v(e.discountAmount||0),pe(e.enrollmentDate?new Date(e.enrollmentDate).toISOString().split("T")[0]:""),Be(e.studentId||""),ge(e.feeType||"normal"),Y(((s=e.brand)==null?void 0:s._id)||e.brand||""),te(!0),U(!0)},Na=e=>{var s;te(!1),B(e),z(e.fullName||""),re(e.email||""),le(e.phone1||""),ne(e.phone2||""),ie(e.gender||""),oe(e.dob?new Date(e.dob).toISOString().split("T")[0]:"");const t=we.map(x=>x.value);e.place&&!t.includes(e.place)&&e.place!=="Other"?(E("Other"),F(e.place)):(E(e.place||"Kasaragod"),F(e.otherPlace||"")),de(e.address||""),ce(e.aadharCardNumber||""),J(null),K(e.photo?ve(e.photo):""),ue(e.status||""),me(e.education||""),he(e.coursePreference||""),I(e.additionalCourses||[]),T(e.discountPercentage||0),v(e.discountAmount||0),pe(e.enrollmentDate?new Date(e.enrollmentDate).toISOString().split("T")[0]:""),Be(e.studentId||""),ge(e.feeType||"normal"),Y(((s=e.brand)==null?void 0:s._id)||e.brand||""),je({}),U(!0)},be=()=>{U(!1),B(null),te(!1),je({})},Ca=e=>{ca(e),Ee(e.enrollmentDate?new Date(e.enrollmentDate).toISOString().split("T")[0]:""),S(!0)},Sa=async()=>{var e,t;if(!se){u.error("Please select a date");return}try{_(!0),await L.patch(`${C}/students/update-enrollment-date/${q._id}`,{enrollmentDate:se},{withCredentials:!0}),u.success("Enrollment date updated successfully!"),ye(),S(!1)}catch(s){console.error("Error updating enrollment date:",s),u.error(((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to update date")}finally{_(!1)}},c=r.useCallback(()=>{let e=0;if(p){const t=$.find(s=>s._id===p);t&&(e+=(N==="singleShot"?t.singleShotFee:t.normalFee)||0)}return g.forEach(t=>{const s=$.find(x=>x._id===t);s&&(e+=(N==="singleShot"?s.singleShotFee:s.normalFee)||0)}),e},[p,g,$,N]),wa=r.useCallback(e=>{T(e);const t=c();if(t>0&&e!==""){const s=t*parseFloat(e)/100;v(s.toFixed(2))}else e===""&&v("")},[c]),ka=r.useCallback(e=>{v(e);const t=c();if(t>0&&e!==""){const s=parseFloat(e)/t*100;T(parseFloat(s.toFixed(4)).toString())}else e===""&&T("")},[c]);r.useEffect(()=>{if(ae){const e=c();if(W!==""&&e>0){const t=e*parseFloat(W)/100;v(t.toFixed(2))}}},[p,g,$,ae,N]);const Ve=r.useCallback(()=>{const e=c(),t=parseFloat(H)||0;return e-t},[c,H]),Pa=r.useCallback(e=>{const t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/")){u.error("Please select an image file");return}if(t.size>5*1024*1024){u.error("File size exceeds 5MB limit");return}J(t);const s=new FileReader;s.onloadend=()=>K(s.result),s.readAsDataURL(t)},[]),Da=r.useCallback(()=>{const e={};return P.trim()||(e.fullName="Full Name is required"),D.trim()?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(D)||(e.email="Please enter a valid email address"):e.email="Email is required",R.trim()||(e.phone1="Phone is required"),A?A==="Other"&&!G.trim()&&(e.otherPlace="Please specify the place"):e.place="Place is required",Z.trim()||(e.address="Address is required"),O.trim()?/^\d{12}$/.test(O)||(e.aadharCardNumber="Aadhar Card Number must be 12 digits"):e.aadharCardNumber="Aadhar Card Number is required",p||(e.coursePreference="Primary course is required"),X||(e.enrollmentDate="Enrollment date is required"),je(e),Object.keys(e).length===0},[P,D,R,A,G,Z,O,p,X]),Aa=async()=>{var e,t;if(!Da()){u.error("Please fill in all required fields");return}try{_(!0);const s=new FormData;s.append("fullName",P),s.append("email",D),s.append("phone1",R),s.append("phone2",Oe),s.append("gender",Ie),s.append("dob",Te),s.append("place",A),s.append("otherPlace",G),s.append("address",Z),s.append("aadharCardNumber",O),s.append("status",Me),s.append("education",Le),s.append("coursePreference",p),s.append("additionalCourses",JSON.stringify(g.filter(Se=>Se))),s.append("totalCourseValue",c()),s.append("feeType",N),s.append("discountPercentage",W||0),s.append("discountAmount",H||0),s.append("finalAmount",Ve()),s.append("enrollmentDate",X),s.append("brandId",fe),$e&&s.append("photo",$e);const x=await L.put(`${C}/students/update/${la._id}`,s,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});ye(),U(!1),B(null),sa()&&u.success("Student updated successfully!"),ta({type:"student_updated",userName:(h==null?void 0:h.fullName)||"Someone",avatar:(h==null?void 0:h.avatar)||null,action:"updated student",entityName:x.data.student.fullName,module:"Student Management"})}catch(s){console.error("Error updating student:",s),u.error(((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to update student")}finally{_(!1)}},Ea=()=>{I([...g,""])},Fa=e=>{const t=[...g];t.splice(e,1),I(t)},Oa=(e,t)=>{const s=[...g];s[e]=t,I(s)},Ia=()=>{var e;(e=qe.current)==null||e.click()},ve=e=>e?e.startsWith("http")||e.startsWith("data:")?e:`${C.replace("/api","")}${e}`:"/images/user/user-01.jpg",M=ra.filter(e=>{var Ze,Je,Ke,We;const t=((Ze=e.fullName)==null?void 0:Ze.toLowerCase().includes(f.toLowerCase()))||((Je=e.studentId)==null?void 0:Je.toLowerCase().includes(f.toLowerCase()))||((Ke=e.email)==null?void 0:Ke.toLowerCase().includes(f.toLowerCase()))||((We=e.phone1)==null?void 0:We.toLowerCase().includes(f.toLowerCase())),s=w===""||e.coursePreference===w,x=k===""||e.status===k,Se=y===""||y==="assigned"&&e.batchScheduled||y==="unassigned"&&!e.batchScheduled;return t&&s&&x&&Se}),ze=Math.ceil(M.length/V),Ne=b*V,Re=Ne-V,Ge=M.slice(Re,Ne),Ce=e=>{Fe(e)};return r.useEffect(()=>{Fe(1)},[f,w,k,y]),a.jsxs("div",{children:[a.jsx(Ua,{title:"Manage Students | DreamCRM",description:"Manage your students here"}),a.jsx(Ba,{pageTitle:"Manage Students"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 w-full md:w-auto flex-grow max-w-5xl",children:[a.jsx(o,{type:"text",placeholder:"Search by name, ID, email...",value:f,onChange:e=>xa(e.target.value),className:"w-full"}),a.jsx(d,{options:[{label:"All Courses",value:""},...$.map(e=>({label:e.courseName,value:e._id}))],value:w,onChange:e=>ua(e),className:"w-full"}),a.jsx(d,{options:[{label:"All Status",value:""},...He.map(e=>({label:e.label,value:e.value}))],value:k,onChange:e=>ma(e),className:"w-full"}),a.jsx(d,{options:[{label:"All Batch Status",value:""},{label:"Assigned",value:"assigned"},{label:"Unassigned",value:"unassigned"}],value:y,onChange:e=>ha(e),className:"w-full"})]}),!Q&&a.jsx(m,{variant:"primary",onClick:ya,className:"whitespace-nowrap",children:"Add New Student"})]}),a.jsxs(_a,{title:"Student List",children:[De?a.jsx(qa,{}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Photo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Student"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Course"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Enrollment Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-900 dark:divide-gray-700",children:Ge.length>0?Ge.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("img",{className:"h-10 w-10 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700",src:ve(e.photo),alt:e.fullName,onError:t=>{t.target.src="/images/user/user-01.jpg"}})})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white cursor-pointer hover:text-indigo-600 transition-colors",onClick:()=>ba(e),children:e.fullName}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.studentId}),a.jsx("div",{className:"mt-1",children:e.batchScheduled?a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-success-50 text-success-600 dark:bg-success-900/20 dark:text-success-400 whitespace-nowrap inline-block",children:"Batch Assigned"}):a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-error-50 text-error-600 dark:bg-error-900/20 dark:text-error-400 whitespace-nowrap inline-block",children:"Unassigned"})})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-gray-900 dark:text-white",children:e.email}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.phone1})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.jsxs("div",{className:"max-w-[200px] break-words",children:[e.courseDetails?`${e.courseDetails.courseCode} - ${e.courseDetails.courseName}`:e.coursePreference,e.additionalCourseDetails&&e.additionalCourseDetails.length>0&&a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["+",e.additionalCourseDetails.length," additional course(s)"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white text-xs",children:["Final: ₹",e.finalAmount||0]}),a.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 line-through",children:["Val: ₹",e.totalCourseValue||0]}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full mt-1 w-fit ${e.feeType==="singleShot"?"bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400":"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400"}`,children:e.feeType==="singleShot"?"Single Shot":"Normal Fee"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.enrollmentDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100",children:"Active"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[!Q&&a.jsx("button",{onClick:()=>Na(e),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Edit"}),a.jsx("button",{onClick:()=>va(e),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"View"}),!Q&&a.jsx("button",{onClick:()=>Ca(e),className:"text-amber-600 hover:text-amber-900 dark:text-amber-400 dark:hover:text-amber-300",children:"Date"})]})})]},e._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"px-6 py-10 text-center text-gray-500",children:f||w||k||y?"No students match your search/filters":"No students registered yet"})})})]})}),!De&&M.length>V&&a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-gray-100 dark:border-gray-800 pt-6",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200",children:Re+1})," to"," ",a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200",children:Math.min(Ne,M.length)})," ","of ",a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200",children:M.length})," students"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(m,{variant:"outline",size:"sm",disabled:b===1,onClick:()=>Ce(b-1),children:"Previous"}),a.jsx("div",{className:"flex items-center gap-1",children:[...Array(ze)].map((e,t)=>a.jsx("button",{onClick:()=>Ce(t+1),className:`min-w-[32px] h-8 rounded-lg text-sm font-medium transition-colors ${b===t+1?"bg-brand-500 text-white":"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:t+1},t))}),a.jsx(m,{variant:"outline",size:"sm",disabled:b===ze,onClick:()=>Ce(b+1),children:"Next"})]})]})]})]}),a.jsxs(Xe,{isOpen:ae,onClose:be,className:"max-w-[1400px] p-6 lg:p-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"mb-2 font-semibold text-gray-800 dark:text-white/90 modal-title text-theme-xl lg:text-2xl",children:[l?"View Student":"Edit Student",": ",a.jsx("span",{className:"text-gray-500",children:Ue})]}),a.jsx("button",{onClick:be,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"✕"})]}),a.jsx("div",{className:"overflow-y-auto max-h-[80vh] p-2",children:a.jsx("div",{className:"grid grid-cols-1 gap-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(n,{children:"Full Name *"}),a.jsx(o,{type:"text",value:P,onChange:e=>z(e.target.value.toUpperCase()),error:!!i.fullName,hint:i.fullName,className:"uppercase"})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Brand *"}),a.jsx(d,{options:_e.map(e=>({value:e._id,label:`${e.name} (${e.code})`})),value:fe,onChange:Y})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Full Name *"}),a.jsx(o,{type:"text",value:P,onChange:e=>z(e.target.value.toUpperCase()),error:!!i.fullName,hint:i.fullName,className:"uppercase",disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Brand *"}),a.jsx(d,{options:_e.map(e=>({value:e._id,label:`${e.name} (${e.code})`})),value:fe,onChange:Y,disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Email *"}),a.jsx(o,{type:"email",value:D,onChange:e=>re(e.target.value),error:!!i.email,hint:i.email,disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Student Photo"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"file",ref:qe,onChange:Pa,accept:"image/*",className:"hidden"}),a.jsx("button",{type:"button",onClick:Ia,className:`w-16 h-16 overflow-hidden border-2 border-dashed border-gray-300 rounded-full cursor-pointer hover:border-brand-500 transition-colors flex items-center justify-center ${l?"pointer-events-none opacity-60":""}`,children:xe?a.jsx("img",{src:xe,alt:"Preview",className:"w-full h-full object-cover"}):a.jsx("div",{className:"text-xs text-gray-400 text-center",children:"No Photo"})}),xe&&!l&&a.jsx("button",{type:"button",onClick:()=>{J(null),K("")},className:"text-xs text-red-500 hover:text-red-700",children:"Remove"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(n,{children:"Phone 1 *"}),a.jsx(Ye,{countries:Qe,value:R,onChange:le,error:!!i.phone1,disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Phone 2"}),a.jsx(Ye,{countries:Qe,value:Oe,onChange:ne,disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Gender"}),a.jsx(d,{options:Va,value:Ie,onChange:ie,disabled:l})]}),a.jsx("div",{children:a.jsx(ke,{id:"edit-student-dob",label:"Date of Birth",value:Te,onChange:(e,t)=>oe(t),disabled:l})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(n,{children:"Place *"}),a.jsx(d,{options:we,value:A,onChange:E,error:!!i.place,disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Specify Other Place *"}),a.jsx(o,{type:"text",value:G,onChange:e=>F(e.target.value.toUpperCase()),error:!!i.otherPlace,placeholder:"Enter village/city name",className:"uppercase",disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Address *"}),a.jsx(o,{type:"text",value:Z,onChange:e=>de(e.target.value.toUpperCase()),error:!!i.address,className:"uppercase",disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Aadhar Number *"}),a.jsx(o,{type:"text",value:O,onChange:e=>ce(e.target.value.replace(/\D/g,"")),maxLength:"12",error:!!i.aadharCardNumber,disabled:l})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(n,{children:"Current Status"}),a.jsx(d,{options:He,value:Me,onChange:ue,disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Education"}),a.jsx(d,{options:za,value:Le,onChange:me,disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Primary Course *"}),a.jsx(ea,{value:p,onChange:he,error:!!i.coursePreference,disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Fee Type *"}),a.jsx(d,{options:[{value:"normal",label:"Normal Fee"},{value:"singleShot",label:"Single Shot"}],value:N,onChange:ge,disabled:l})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-800 p-2 rounded",children:[a.jsx(n,{className:"!mb-0",children:"Additional Courses"}),!l&&a.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:Ea,children:"Add Course"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map((e,t)=>a.jsxs("div",{className:"flex gap-2 items-end",children:[a.jsx("div",{className:"flex-grow",children:a.jsx(ea,{value:e,onChange:s=>Oa(t,s),disabled:l})}),!l&&a.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>Fa(t),children:"Remove"})]},t))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx(n,{children:"Total Value (₹)"}),a.jsx(o,{type:"text",value:c(),readOnly:!0,className:"bg-white dark:bg-gray-900"})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Discount (%)"}),a.jsx(o,{type:"number",value:W,onChange:e=>wa(e.target.value),step:"any",placeholder:"0.00",disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Discount (₹)"}),a.jsx(o,{type:"number",value:H,onChange:e=>ka(e.target.value),step:"any",disabled:l})]}),a.jsxs("div",{children:[a.jsx(n,{children:"Final Amount (₹)"}),a.jsx(o,{type:"text",value:Ve().toFixed(2),readOnly:!0,className:"bg-white dark:bg-gray-900 font-bold text-brand-600"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{children:a.jsx(ke,{id:"edit-student-enrollment-date",label:"Enrollment Date *",value:X,onChange:(e,t)=>pe(t),error:!!i.enrollmentDate,disabled:l})}),a.jsxs("div",{children:[a.jsx(n,{children:"Student ID (Locked)"}),a.jsx(o,{type:"text",value:Ue,readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 font-mono"})]})]})]})})}),a.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-100 dark:border-gray-800",children:[a.jsx(m,{variant:"outline",onClick:be,disabled:j,children:l?"Close":"Cancel"}),!l&&a.jsx(m,{variant:"primary",onClick:Aa,disabled:j,children:j?"Saving...":"Save Changes"})]})]}),a.jsx(Ga,{isOpen:na,onClose:()=>Ae(!1),student:ia}),a.jsxs(Xe,{isOpen:da,onClose:()=>S(!1),className:"max-w-[400px] p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Change Enrollment Date"}),a.jsx("button",{onClick:()=>S(!1),className:"text-gray-500",children:"✕"})]}),a.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Updating date for: ",a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:q==null?void 0:q.fullName})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(ke,{id:"quick-enrollment-date",label:"New Enrollment Date",value:se,onChange:(e,t)=>Ee(t)}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(m,{variant:"outline",onClick:()=>S(!1),disabled:j,children:"Cancel"}),a.jsx(m,{variant:"primary",onClick:Sa,disabled:j,children:j?"Updating...":"Update Date"})]})]})]}),a.jsx(Ra,{position:"top-center",className:"!z-[999999]",style:{zIndex:999999}})]})}export{at as default};
