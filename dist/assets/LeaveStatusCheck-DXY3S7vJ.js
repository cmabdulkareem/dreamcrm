import{a5 as j,r as c,j as e,P as k,C as v,t as N,I as f,w,c as g,y as l}from"./index-Cn8aCYCy.js";const h="http://localhost:3000/api",L=()=>{const[x]=j(),[n,m]=c.useState(""),[a,r]=c.useState(null),[u,i]=c.useState(!1);c.useEffect(()=>{const s=x.get("ticket");if(s){const d=s.toUpperCase();m(d),d.trim()&&(async()=>{try{i(!0);const t=await g.get(`${h}/leaves/status/${d}`,{timeout:1e4});t.data&&t.data.success&&t.data.leave?r(t.data.leave):r(null)}catch{r(null)}finally{i(!1)}})()}},[x]);const p=async s=>{var d,o;if(s.preventDefault(),!n.trim()){l.error("Please enter a ticket number");return}try{i(!0);const t=await g.get(`${h}/leaves/status/${n.trim()}`,{timeout:1e4});t.data&&t.data.success&&t.data.leave?r(t.data.leave):(l.error("Leave request not found"),r(null))}catch(t){console.error("Error fetching leave status:",t),t.response?t.response.status===404?l.error(((d=t.response.data)==null?void 0:d.message)||"Leave request not found. Please check your ticket number."):l.error(((o=t.response.data)==null?void 0:o.message)||"Failed to fetch leave status"):t.request?l.error("Network error. Please check your connection."):l.error("Failed to fetch leave status. Please try again."),r(null)}finally{i(!1)}},y=s=>{switch(s){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100";case"pending":default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100"}},b=s=>{switch(s){case"approved":return"Approved";case"rejected":return"Rejected";case"pending":default:return"Pending"}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Check Leave Status - CRM"}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(v,{title:"Check Leave Request Status",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Enter your ticket number to check the status of your leave request."}),e.jsx("form",{onSubmit:p,className:"mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(N,{htmlFor:"ticketNumber",children:"Ticket Number"}),e.jsx(f,{type:"text",id:"ticketNumber",name:"ticketNumber",value:n,onChange:s=>m(s.target.value.toUpperCase()),placeholder:"e.g., LR20241225123456",required:!0,className:"uppercase"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Checking...":"Check Status"})})]})}),a&&e.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Leave Request Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ticket Number"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:a.ticketNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${y(a.status)}`,children:b(a.status)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Employee Name"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:a.employeeName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Employee ID"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:a.employeeId})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Leave Type"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white capitalize",children:a.leaveType})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Start Date"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:new Date(a.startDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"End Date"}),e.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:new Date(a.endDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Reason"}),e.jsx("p",{className:"text-base text-gray-900 dark:text-white",children:a.reason})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Submitted On"}),e.jsx("p",{className:"text-base text-gray-900 dark:text-white",children:new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.updatedAt&&a.updatedAt!==a.createdAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Updated"}),e.jsx("p",{className:"text-base text-gray-900 dark:text-white",children:new Date(a.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Don't have a ticket number?"," ",e.jsx("a",{href:"/leave-request",className:"underline hover:text-blue-600 dark:hover:text-blue-300",children:"Submit a new leave request"})]})})]})})})}),e.jsx(w,{position:"top-center",className:"!z-[999999]",style:{zIndex:999999}})]})};export{L as default};
