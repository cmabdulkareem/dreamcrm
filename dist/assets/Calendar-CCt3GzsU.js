import{a as T,D as A,r as s,w as I,A as L,h as O,j as e,P as R,M as G}from"./index-BNEGGE57.js";import{F as U,i as B,a as W,b as V}from"./index-c4765rev.js";const K=()=>{var v;const d=T(),{events:o,setEvents:z,addEvent:y,updateEvent:k,deleteEvent:j}=A(),[a,w]=s.useState(null),[i,h]=s.useState(""),[c,x]=s.useState(""),[m,u]=s.useState(""),[n,b]=s.useState(""),N=s.useRef(null),{isOpen:E,openModal:g,closeModal:l}=I(),{user:C}=s.useContext(L),S=o.filter(t=>{var r;return!(O(C,"Instructor")&&((r=t.extendedProps)!=null&&r.leadId))}),D={Danger:"danger",Success:"success",Primary:"primary",Warning:"warning"},M=t=>{resetModalFields(),x(t.startStr),u(t.endStr||t.startStr),g()},P=t=>{var p,f;const r=t.event;w(r),h(r.title),x(((p=r.start)==null?void 0:p.toISOString().split("T")[0])||""),u(((f=r.end)==null?void 0:f.toISOString().split("T")[0])||""),b(r.extendedProps.calendar),g()},$=()=>{a?k(a.id,{title:i,start:c,end:m,extendedProps:{calendar:n}}):y({title:i,start:c,end:m,allDay:!0,extendedProps:{calendar:n}}),l(),resetModalFields()},F=()=>{var t;(t=a==null?void 0:a.extendedProps)!=null&&t.leadId&&(sessionStorage.setItem("openLeadId",a.extendedProps.leadId),d("/lead-management"))};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Calendar | DreamCRM",description:"Calendar view of your schedules"}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]",children:[e.jsx("div",{className:"custom-calendar",children:e.jsx(U,{ref:N,plugins:[B,W,V],initialView:"dayGridMonth",headerToolbar:{left:"prev,next addEventButton",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:S,selectable:!0,select:M,eventClick:P,eventContent:q,customButtons:{addEventButton:{text:"Add Event +",click:g}}})}),e.jsx(G,{isOpen:E,onClose:l,className:"max-w-[700px] p-6 lg:p-10",children:e.jsxs("div",{className:"flex flex-col px-2 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-2 font-semibold text-gray-800 modal-title text-theme-xl dark:text-white/90 lg:text-2xl",children:a?"Edit Event":"Add Event"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Plan your next big moment: schedule or edit an event to stay on track"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Event Title"}),e.jsx("input",{id:"event-title",type:"text",value:i,onChange:t=>h(t.target.value),className:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block mb-4 text-sm font-medium text-gray-700 dark:text-gray-400",children:"Event Color"}),e.jsx("div",{className:"flex flex-wrap items-center gap-4 sm:gap-5",children:Object.entries(D).map(([t,r])=>e.jsx("div",{className:"n-chk",children:e.jsx("div",{className:`form-check form-check-${r} form-check-inline`,children:e.jsxs("label",{className:"flex items-center text-sm text-gray-700 form-check-label dark:text-gray-400",htmlFor:`modal${t}`,children:[e.jsxs("span",{className:"relative",children:[e.jsx("input",{className:"sr-only form-check-input",type:"radio",name:"event-level",value:t,id:`modal${t}`,checked:n===t,onChange:()=>b(t)}),e.jsx("span",{className:"flex items-center justify-center w-5 h-5 mr-2 border border-gray-300 rounded-full box dark:border-gray-700",children:e.jsx("span",{className:`h-2 w-2 rounded-full bg-white ${n===t?"block":"hidden"}`})})]}),t]})})},t))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Enter Start Date"}),e.jsx("input",{id:"event-start-date",type:"date",value:c,onChange:t=>x(t.target.value),className:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Enter End Date"}),e.jsx("input",{id:"event-end-date",type:"date",value:m,onChange:t=>u(t.target.value),className:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6 modal-footer sm:justify-end",children:[e.jsx("button",{onClick:l,type:"button",className:"flex w-full justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] sm:w-auto",children:"Close"}),a&&((v=a.extendedProps)==null?void 0:v.leadId)&&e.jsx("button",{type:"button",className:"flex w-full justify-center rounded-lg border border-yellow-500 bg-yellow-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-yellow-600 sm:w-auto",onClick:F,children:"Update Status"}),a&&e.jsx("button",{type:"button",className:"flex w-full justify-center rounded-lg border border-red-500 bg-red-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-red-600 sm:w-auto",onClick:()=>{j(a.id),l(),resetModalFields()},children:"Delete Event"}),e.jsx("button",{onClick:$,type:"button",className:"btn btn-success btn-update-event flex w-full justify-center rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-brand-600 sm:w-auto",children:a?"Update Changes":"Add Event"})]})]})})]})]})},q=d=>{const o=`fc-bg-${d.event.extendedProps.calendar.toLowerCase()}`;return e.jsxs("div",{className:`event-fc-color flex fc-event-main ${o} p-1 rounded-sm`,children:[e.jsx("div",{className:"fc-daygrid-event-dot"}),e.jsx("div",{className:"fc-event-time",children:d.timeText}),e.jsx("div",{className:"fc-event-title",children:d.event.title})]})};export{K as default};
