import{r as f,j as l,x as Y}from"./index-BNEGGE57.js";import{f as C}from"./index-B_JH6AFf.js";import{S as K}from"./calender-line-DQbsZUHO.js";function q({id:i,mode:h,onChange:y,label:S,defaultDate:w,value:D,placeholder:F="dd/mm/yyyy",minDate:x,disablePastDates:b,required:j=!1}){const g=D||w,s=f.useRef(null),[d,o]=f.useState(""),[v,k]=f.useState(!1);f.useEffect(()=>{if(g){const t=new Date(g);if(!isNaN(t.getTime())){const r=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();o(`${r}/${n}/${a}`)}}else o("")},[g]),f.useEffect(()=>{const t=b?"today":x||null;return s.current=C(`#${i}-wrapper`,{mode:h||"single",static:!0,monthSelectorType:"static",dateFormat:"Y-m-d",wrap:!0,allowInput:!0,clickOpens:!1,defaultDate:g,minDate:t,disable:[],onChange:(r,n)=>{if(r.length>0){const a=String(r[0].getDate()).padStart(2,"0"),e=String(r[0].getMonth()+1).padStart(2,"0"),u=r[0].getFullYear();o(`${a}/${e}/${u}`),y&&y(r,n)}}}),()=>{s.current&&(typeof s.current.destroy=="function"?s.current.destroy():Array.isArray(s.current)&&s.current.forEach(r=>{typeof r.destroy=="function"&&r.destroy()}),s.current=null)}},[h,y,i,x,b]);const c="dd/mm/yyyy",E=()=>{k(!0),d||(o(c),setTimeout(()=>{const t=document.getElementById(i);t&&t.setSelectionRange(0,0)},0))},N=()=>{k(!1),d===c&&o("")},R=t=>{if(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="Tab")return;t.preventDefault();const r=t.target;let n=r.selectionStart,a=d;if(t.key==="Backspace"){if(n>0){let e=n-1;if(a[e]==="/"&&e--,e>=0){const u=c[e],m=a.substring(0,e)+u+a.substring(e+1);o(m),setTimeout(()=>r.setSelectionRange(e,e),0),s.current&&s.current.clear()}}return}if(/^\d$/.test(t.key)&&n<c.length&&(a[n]==="/"&&n++,n<c.length)){const e=a.substring(0,n)+t.key+a.substring(n+1);o(e);const u=n+1;if(setTimeout(()=>r.setSelectionRange(u,u),0),!e.includes("d")&&!e.includes("m")&&!e.includes("y")){const[m,T,V]=e.split("/"),A=`${V}-${T}-${m}`;if(s.current){s.current.setDate(A,!0);const p=s.current.selectedDates[0];if(p){const I=String(p.getDate()).padStart(2,"0"),M=String(p.getMonth()+1).padStart(2,"0"),B=p.getFullYear(),$=`${I}/${M}/${B}`;$!==e&&o($)}else o(c)}}}};return l.jsxs("div",{children:[S&&l.jsx(Y,{htmlFor:i,required:j,children:S}),l.jsxs("div",{className:"relative",id:`${i}-wrapper`,children:[l.jsx("input",{id:i,value:d,onFocus:E,onBlur:N,onKeyDown:R,onChange:()=>{},placeholder:F,"data-input":!0,className:`h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3  dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30  bg-transparent  border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700  dark:focus:border-brand-800 ${v&&d===c?"text-gray-400":"text-gray-800"}`}),l.jsx("span",{"data-toggle":!0,className:"absolute text-gray-500 -translate-y-1/2 right-3 top-1/2 dark:text-gray-400 cursor-pointer hover:text-brand-500 transition-colors",children:l.jsx(K,{className:"size-6"})})]})]})}export{q as D};
