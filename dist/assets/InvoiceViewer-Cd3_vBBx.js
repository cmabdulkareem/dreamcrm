import{r as c,j as e,B as y,c as P,S as F}from"./index-BRRNp47y.js";import{S as R}from"./file-Bn9R9aj5.js";const z=t=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em",...t},c.createElement("path",{d:"M1.94631 9.31555C1.42377 9.14137 1.41965 8.86034 1.95706 8.6812L21.0433 2.31913C21.5717 2.14297 21.8748 2.43878 21.7268 2.95706L16.2736 22.0433C16.1226 22.5717 15.8179 22.5901 15.5946 22.0877L12.0002 14.0001L18.0002 6.00012L10.0002 12.0001L1.94631 9.31555Z"})),A=({receipt:t,onPrint:r,onClose:s})=>{var m,d,p,n,i,h,g,l,x;if(!t)return null;const o=()=>{r?r():window.print()};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-2 print:hidden px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s&&e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 font-medium text-sm flex items-center",children:"â† Back to Invoice"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Receipt Voucher"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(y,{variant:"outline",size:"sm",onClick:o,className:"flex items-center text-xs h-10 border-gray-300 dark:border-gray-600 px-4",children:[e.jsx(R,{className:"size-4.5 mr-2 text-green-600"}),"Print / PDF"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-200 dark:border-gray-800 rounded-sm overflow-hidden p-8 sm:p-14 print:p-0 print:shadow-none print:border-0",id:"print-area",children:[e.jsxs("div",{className:"flex justify-between items-start mb-10",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:(m=t.brand)!=null&&m.logo?e.jsx("img",{src:t.brand.logo,alt:"Brand Logo",className:"h-14 w-auto"}):e.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-full flex items-center justify-center text-white text-3xl font-bold",children:(p=(d=t.brand)==null?void 0:d.name)==null?void 0:p.charAt(0)})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight",children:(n=t.brand)==null?void 0:n.name}),e.jsxs("div",{className:"text-[13px] text-gray-500 dark:text-gray-400 leading-normal max-w-[250px]",children:[e.jsx("p",{children:(i=t.brand)==null?void 0:i.address}),e.jsx("p",{children:(h=t.brand)==null?void 0:h.phone}),e.jsx("p",{children:(g=t.brand)==null?void 0:g.email})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h1",{className:"text-4xl font-light text-gray-800 dark:text-gray-100 mb-1 tracking-tight",children:"PAYMENT RECEIPT"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Receipt# ",e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t.receiptNumber})]})]})]}),e.jsxs("div",{className:"border-t border-b border-gray-200 dark:border-gray-700 py-4 mb-8 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50 px-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Payment Date"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(t.paymentDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Payment Mode"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.paymentMode})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Reference #"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.referenceNumber||"-"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Amount Received"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:t.amount.toLocaleString("en-IN",{style:"currency",currency:"INR"})})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6",children:["Received with thanks from ",e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:(l=t.customer)==null?void 0:l.fullName})," for payment of Invoice ",e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["#",(x=t.invoice)==null?void 0:x.invoiceNumber]}),"."]}),t.notes&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 p-4 rounded text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("span",{className:"font-bold block mb-1",children:"Notes:"}),t.notes]})]}),e.jsx("div",{className:"mt-20 flex justify-end",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-16 mb-2 border-b border-gray-300 w-48"}),e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Authorized Signature"})]})})]}),e.jsx("style",{type:"text/css",media:"print",children:`
                @page { size: auto; margin: 0mm; }
                body { visibility: hidden; }
                #print-area { 
                    visibility: visible; 
                    position: absolute; 
                    left: 0; 
                    top: 0; 
                    width: 100%; 
                    margin: 0;
                    padding: 20px 40px !important;
                    box-shadow: none !important;
                    border: none !important;
                }
                #print-area * { visibility: visible; }
            `})]})},C="http://localhost:3000/api",B=({invoice:t,onPrint:r,onEdit:s,onMarkAsSent:o,showHeader:m=!0})=>{var l,x,b,j,N,u,f,k,w,v,D,I,S;const[d,p]=c.useState([]),[n,i]=c.useState(null);c.useEffect(()=>{t!=null&&t._id&&h()},[t]);const h=async()=>{try{const a=await P.get(`${C}/receipts/invoice/${t._id}`,{withCredentials:!0});p(a.data)}catch(a){console.error("Error fetching receipts:",a)}},g=()=>{r?r():window.print()};return t?n?e.jsx(A,{receipt:n,onClose:()=>i(null)}):e.jsxs("div",{className:"w-full",children:[m&&e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-2 print:hidden px-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Invoice Preview"}),e.jsxs("div",{className:"flex gap-2.5 pr-20",children:[s&&t.status!=="Paid"&&e.jsxs(y,{variant:"outline",size:"sm",onClick:s,className:"flex items-center text-xs h-10 border-gray-300 dark:border-gray-600 px-4",children:[e.jsx(F,{className:"size-4 mr-2 text-blue-600"}),"Edit"]}),o&&t.status==="Draft"&&e.jsxs(y,{variant:"outline",size:"sm",onClick:o,className:"flex items-center text-xs h-10 border-gray-300 dark:border-gray-600 px-4 hover:border-blue-500 hover:text-blue-600",children:[e.jsx(z,{className:"size-4 mr-2 text-blue-600"}),"Mark as Sent"]}),e.jsxs(y,{variant:"outline",size:"sm",onClick:g,className:"flex items-center text-xs h-10 border-gray-300 dark:border-gray-600 px-4",children:[e.jsx(R,{className:"size-4.5 mr-2 text-green-600"}),"Print / PDF"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-200 dark:border-gray-800 rounded-sm overflow-hidden p-8 sm:p-14 print:shadow-none print:border-0",id:"print-area",children:[e.jsxs("div",{className:"flex justify-between items-start mb-10",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:(l=t.brand)!=null&&l.logo?e.jsx("img",{src:t.brand.logo,alt:"Brand Logo",className:"h-14 w-auto"}):e.jsx("div",{className:"w-14 h-14 bg-green-500 rounded-full flex items-center justify-center text-white text-3xl font-bold",children:(b=(x=t.brand)==null?void 0:x.name)==null?void 0:b.charAt(0)})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white print:text-black leading-tight",children:(j=t.brand)==null?void 0:j.name}),e.jsxs("div",{className:"text-[13px] text-gray-500 dark:text-gray-400 print:text-gray-600 leading-normal max-w-[250px]",children:[e.jsx("p",{children:(N=t.brand)==null?void 0:N.address}),e.jsx("p",{children:(u=t.brand)==null?void 0:u.phone}),e.jsx("p",{children:(f=t.brand)==null?void 0:f.email})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h1",{className:"text-5xl font-normal text-gray-800 dark:text-gray-100 print:text-black mb-1 tracking-tight",children:"Invoice"}),e.jsxs("p",{className:"text-[13px] text-gray-500 dark:text-gray-400 print:text-gray-600 mb-6",children:["Invoice# ",e.jsx("span",{className:"text-gray-900 dark:text-white print:text-black font-medium",children:t.invoiceNumber})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest text-[10px]",children:"Balance Due"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white print:text-black",children:((t.status==="Paid"?0:t.totalAmount-(t.amountReceived||0))||0).toLocaleString("en-IN",{style:"currency",currency:"INR"})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-start mb-12",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Bill To"}),e.jsx("h3",{className:"text-base font-bold text-gray-900 dark:text-white print:text-black mb-1",children:(k=t.customer)==null?void 0:k.fullName}),e.jsxs("div",{className:"text-[13px] text-gray-600 dark:text-gray-300 print:text-gray-600 leading-relaxed",children:[((w=t.customer)==null?void 0:w.address)&&e.jsx("p",{children:t.customer.address}),e.jsx("p",{children:((v=t.customer)==null?void 0:v.phone)||((D=t.customer)==null?void 0:D.phone1)}),e.jsx("p",{children:(I=t.customer)==null?void 0:I.email})]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsxs("div",{className:"flex justify-end gap-8 text-[13px]",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 print:text-gray-600",children:"Invoice Date :"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white print:text-black w-24",children:new Date(t.invoiceDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-end gap-8 text-[13px]",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 print:text-gray-600",children:"Due Date :"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white print:text-black w-24",children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"-"})]}),e.jsxs("div",{className:"flex justify-end gap-8 text-[13px]",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 print:text-gray-600",children:"Terms :"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white print:text-black w-24",children:t.terms||"Due On Receipt"})]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 text-left text-[11px] font-bold uppercase tracking-wider w-12 border-r border-gray-600",children:"#"}),e.jsx("th",{className:"py-2 px-3 text-left text-[11px] font-bold uppercase tracking-wider border-r border-gray-600",children:"Item & Description"}),e.jsx("th",{className:"py-2 px-3 text-right text-[11px] font-bold uppercase tracking-wider w-20 border-r border-gray-600",children:"Qty"}),e.jsx("th",{className:"py-2 px-3 text-right text-[11px] font-bold uppercase tracking-wider w-24 border-r border-gray-600",children:"Rate"}),e.jsx("th",{className:"py-2 px-3 text-right text-[11px] font-bold uppercase tracking-wider w-20 border-r border-gray-600",children:"Discount"}),e.jsx("th",{className:"py-2 px-3 text-right text-[11px] font-bold uppercase tracking-wider w-28",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:(S=t.items)==null?void 0:S.map((a,L)=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-3 text-[13px] text-gray-500 text-center",children:L+1}),e.jsxs("td",{className:"py-3 px-3",children:[e.jsx("p",{className:"text-[13px] font-bold text-gray-900 dark:text-white print:text-black mb-0.5",children:a.description}),e.jsx("p",{className:"text-[11px] text-gray-500 italic",children:"Standard service description"})]}),e.jsx("td",{className:"py-3 px-3 text-right text-[13px] text-gray-600 dark:text-gray-300 print:text-gray-600",children:Number(a.quantity).toFixed(2)}),e.jsx("td",{className:"py-3 px-3 text-right text-[13px] text-gray-600 dark:text-gray-300 print:text-gray-600",children:Number(a.rate).toLocaleString("en-IN",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-3 px-3 text-right text-[13px] text-gray-600 dark:text-gray-300 print:text-gray-600",children:0 .toFixed(2)}),e.jsx("td",{className:"py-3 px-3 text-right text-[13px] font-semibold text-gray-900 dark:text-white print:text-black",children:Number(a.amount).toLocaleString("en-IN",{minimumFractionDigits:2})})]},L))})]})}),e.jsx("div",{className:"flex justify-end mb-12",children:e.jsxs("div",{className:"w-1/2 max-w-sm space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-[13px] text-gray-600 dark:text-gray-400 print:text-gray-600",children:[e.jsx("span",{children:"Sub Total"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white print:text-black",children:t.subTotal.toLocaleString("en-IN",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"flex justify-between text-[13px] text-gray-600 dark:text-gray-400 print:text-gray-600",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white print:text-black",children:(t.totalAmount+(parseFloat(t.discount)||0)).toLocaleString("en-IN",{minimumFractionDigits:2})})]}),parseFloat(t.tax)>0&&e.jsxs("div",{className:"flex justify-between text-[13px] text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Tax (",t.tax,"%)"]}),e.jsx("span",{children:(t.subTotal*t.tax/100).toLocaleString("en-IN",{minimumFractionDigits:2})})]}),parseFloat(t.discount)>0&&e.jsxs("div",{className:"flex justify-between text-[13px] text-red-500 dark:text-red-400",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-",Number(t.discount).toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white print:text-black",children:"Total"}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white print:text-black",children:t.totalAmount.toLocaleString("en-IN",{style:"currency",currency:"INR"})})]}),e.jsxs("div",{className:"flex justify-between items-center text-[13px] text-red-500 pt-1",children:[e.jsx("span",{children:"Payment Made"}),e.jsxs("span",{children:["(-) ",(t.amountReceived||0).toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 p-2 rounded",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white print:text-black",children:"Balance Due"}),e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white print:text-black",children:((t.status==="Paid"?0:t.totalAmount-(t.amountReceived||0))||0).toLocaleString("en-IN",{style:"currency",currency:"INR"})})]})]})}),d.length>0&&e.jsxs("div",{className:"mt-8 pt-8 border-t border-dashed border-gray-300 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white print:text-black uppercase tracking-wider mb-4",children:"Payments Received"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 font-semibold",children:"Date"}),e.jsx("th",{className:"px-4 py-2 font-semibold",children:"Receipt #"}),e.jsx("th",{className:"px-4 py-2 font-semibold",children:"Mode"}),e.jsx("th",{className:"px-4 py-2 font-semibold text-right",children:"Amount"}),e.jsx("th",{className:"px-4 py-2 font-semibold text-center print:hidden",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:d.map(a=>e.jsxs("tr",{className:"hover:bg-white dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-2 text-gray-600 dark:text-gray-300",children:new Date(a.paymentDate).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-2 font-medium text-brand-600 dark:text-brand-400",children:a.receiptNumber}),e.jsx("td",{className:"px-4 py-2 text-gray-600 dark:text-gray-300",children:a.paymentMode}),e.jsx("td",{className:"px-4 py-2 text-right font-semibold text-green-600 dark:text-green-400",children:a.amount.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),e.jsx("td",{className:"px-4 py-2 text-center print:hidden",children:e.jsx("button",{onClick:()=>i(a),className:"text-xs text-brand-600 hover:text-brand-800 font-medium hover:underline",children:"View Receipt"})})]},a._id))})]})})]}),(t.notes||t.terms)&&e.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-100 dark:border-gray-800",children:[t.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Notes"}),e.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-400",children:t.notes})]}),t.terms&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Terms & Conditions"}),e.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-400",children:t.terms})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[12px] font-bold text-gray-400 mb-1",children:"Notes"}),e.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-300",children:"Thanks for your business."})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-gray-900 py-1 print:hidden",children:[e.jsx("span",{className:"text-[12px] text-gray-400",children:"Payment Options"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg",alt:"PayPal",className:"h-[14px]"}),e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg",alt:"Visa",className:"h-[10px]"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:[e.jsx("h4",{className:"text-[12px] font-bold text-gray-400 mb-1",children:"Terms & Conditions"}),e.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-300 italic",children:"Please pay the Invoice before the due date."})]}),e.jsx("div",{className:"pt-20 text-center opacity-30 pointer-events-none pb-4",children:e.jsx("p",{className:"text-[10px] text-gray-400",children:"Authorized Signatory"})})]})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
@media print {
    @page {
        margin: 0;
        size: auto;
    }
    body {
        margin: 0;
        padding: 0;
        background: white !important;
    }

    /* Ensure background colors are printed */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    /* Hide everything by default */
    body * {
        visibility: hidden !important;
    }

    /* Show only print area and its children */
    #print-area, #print-area * {
        visibility: visible !important;
    }

    /* Position the print area */
    #print-area {
        position: fixed !important;
        left: 0 !important;
        top: 0 !important;
        width: 100% !important;
        height: auto !important;
        margin: 0 !important;
        background: white !important;
        z-index: 2147483647 !important; /* Max z-index */
    }

    .print\\:hidden {
        display: none !important;
    }
}
`}})]}):null};export{B as I,z as S};
