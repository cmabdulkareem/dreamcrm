import{R as i,c as A,d as j,j as e,M as C}from"./index-BRRNp47y.js";const M=({isOpen:o,onClose:y,student:l})=>{var g,m,b,h,u;const[k,c]=i.useState(null),[f,x]=i.useState(!1);i.useEffect(()=>{o&&l?N():c(null)},[o,l]);const N=async()=>{try{x(!0);const a=l.studentId&&typeof l.studentId=="object"&&l.studentId._id?l.studentId._id:l._id,s=await A.get(`${j}/students/${a}`,{withCredentials:!0});c(s.data.student)}catch(a){console.error("Failed to fetch student details:",a)}finally{x(!1)}};if(!l)return null;const r=k||l,v=a=>a?a.startsWith("http")||a.startsWith("data:")?a:`${j.replace("/api","")}${a}`:"/images/user/user-01.jpg",n=a=>a?new Date(a).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}):"-",w=({status:a})=>{const s={studying:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",working:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",selfEmployed:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",freelancer:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",homeMaker:"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400",jobSeeker:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",doingNothing:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"},d={studying:"Studying",working:"Working",selfEmployed:"Self Employed",freelancer:"Freelancer",homeMaker:"Home Maker",jobSeeker:"Job Seeker",doingNothing:"N/A"};return e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${s[a]||s.doingNothing}`,children:d[a]||a||"N/A"})},t=({label:a,value:s,className:d=""})=>e.jsxs("div",{className:`py-2 border-b border-gray-100 dark:border-gray-800 last:border-0 ${d}`,children:[e.jsx("span",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-0.5",children:a}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium break-words",children:s||"-"})]}),L=({percentage:a})=>{const s=parseFloat(a)||0;let d="bg-red-500";return s>=75?d="bg-green-500":s>=50&&(d="bg-yellow-500"),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Attendance"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[s,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:`${d} h-2.5 rounded-full`,style:{width:`${s}%`}})})]})};return e.jsx(C,{isOpen:o,onClose:y,showCloseButton:!0,className:"max-w-4xl !p-0 overflow-hidden bg-white dark:bg-gray-900 shadow-2xl",children:e.jsxs("div",{className:"max-h-[85vh] overflow-y-auto custom-scrollbar",children:[e.jsx("div",{className:"relative h-32 bg-gradient-to-r from-brand-500 to-brand-700"}),e.jsxs("div",{className:"px-5 pb-8 sm:px-8",children:[e.jsxs("div",{className:"relative -mt-16 flex flex-col sm:flex-row items-center sm:items-end gap-6 mb-8 text-center sm:text-left",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v(r.photo),alt:r.fullName,className:"h-32 w-32 rounded-3xl object-cover border-4 border-white dark:border-gray-900 shadow-lg",onError:a=>{a.target.src="/images/user/user-01.jpg"}}),e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-green-500 h-6 w-6 rounded-full border-4 border-white dark:border-gray-900"})]}),e.jsxs("div",{className:"flex-grow pb-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:r.fullName}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-mono bg-brand-50 dark:bg-gray-800 px-2 py-0.5 rounded text-brand-600 dark:text-brand-400 font-bold tracking-wider",children:r.studentId}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:((g=r.brand)==null?void 0:g.name)||(typeof r.brand=="string"?r.brand:"N/A")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-brand-500 dark:text-brand-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Personal Details"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/40 p-4 rounded-2xl space-y-1 border border-gray-100 dark:border-gray-800",children:[e.jsx(t,{label:"Email Address",value:r.email}),e.jsx(t,{label:"Primary Phone",value:r.phone1}),e.jsx(t,{label:"Alternate Phone",value:r.phone2}),e.jsx(t,{label:"Date of Birth",value:n(r.dob)}),e.jsx(t,{label:"Gender",value:(m=r.gender)==null?void 0:m.toUpperCase()}),e.jsx(t,{label:"Aadhar Number",value:r.aadharCardNumber})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-brand-500 dark:text-brand-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsxs("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Address & Place"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/40 p-4 rounded-2xl space-y-1 border border-gray-100 dark:border-gray-800",children:[e.jsx(t,{label:"Place",value:r.place==="Other"?r.otherPlace:r.place}),e.jsx(t,{label:"Full Address",value:r.address})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-brand-500 dark:text-brand-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsxs("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),e.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"})]}),"Academic Profile"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/40 p-4 rounded-2xl space-y-1 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"py-2 border-b border-gray-100 dark:border-gray-800",children:[e.jsx("span",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Current Status"}),e.jsx(w,{status:r.status})]}),e.jsx(t,{label:"Education",value:r.education}),e.jsx(t,{label:"Primary Course",value:r.courseDetails?`${r.courseDetails.courseCode} - ${r.courseDetails.courseName}`:r.coursePreference}),r.additionalCourseDetails&&r.additionalCourseDetails.length>0&&e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Additional Courses"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:r.additionalCourseDetails.map((a,s)=>e.jsx("span",{className:"text-xs bg-brand-50 text-brand-600 dark:bg-brand-900/20 dark:text-brand-300 px-2 py-1 rounded-lg",children:a.courseCode},s))})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-brand-500 dark:text-brand-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Batch Attendance"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/40 p-4 rounded-2xl space-y-4 border border-gray-100 dark:border-gray-800",children:f?e.jsx("div",{className:"text-center py-4 text-sm text-gray-500",children:"Loading attendance data..."}):r.batchHistory&&r.batchHistory.length>0?r.batchHistory.map((a,s)=>{var d,p;return e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white",children:a.batchName}),e.jsx("p",{className:"text-xs text-gray-500",children:a.subject})]}),e.jsx("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded text-gray-600 dark:text-gray-400",children:n(a.startDate)})]}),e.jsx(L,{percentage:a.attendancePercentage}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex gap-3",children:[e.jsxs("span",{children:["Total: ",e.jsx("b",{children:((d=a.attendanceDetails)==null?void 0:d.length)||0})]}),e.jsxs("span",{className:"text-green-600",children:["Present: ",e.jsx("b",{children:((p=a.attendanceDetails)==null?void 0:p.filter(S=>S.status==="Present").length)||0})]})]})]},s)}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No batch enrollment history found."})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-brand-500 dark:text-brand-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Financial Summary"]}),e.jsxs("div",{className:"bg-brand-500 p-6 rounded-3xl text-white shadow-xl shadow-brand-100 dark:shadow-none mb-4",children:[e.jsx("span",{className:"text-xs opacity-80 uppercase tracking-widest font-bold",children:"Final Amount Payable"}),e.jsxs("div",{className:"text-4xl font-black mt-1",children:["₹",(b=r.finalAmount)==null?void 0:b.toLocaleString()]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Discount Applied"}),e.jsxs("span",{className:"font-bold",children:[r.discountPercentage,"% (₹",(h=r.discountAmount)==null?void 0:h.toLocaleString(),")"]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/40 p-4 rounded-2xl space-y-1 border border-gray-100 dark:border-gray-800",children:[e.jsx(t,{label:"Total Course Value",value:`₹${(u=r.totalCourseValue)==null?void 0:u.toLocaleString()}`}),e.jsxs("div",{className:"py-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Batch Scheduled"}),e.jsx("span",{className:`h-3 w-3 rounded-full ${r.batchScheduled?"bg-green-500":"bg-red-500"}`,title:r.batchScheduled?"Scheduled":"Not Scheduled"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-brand-500 dark:text-brand-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Enrollment Info"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/40 p-4 rounded-2xl space-y-1 border border-gray-100 dark:border-gray-800",children:[e.jsx(t,{label:"Enrollment Date",value:n(r.enrollmentDate)}),e.jsx(t,{label:"Created By",value:r.createdBy}),e.jsx(t,{label:"Registered On",value:n(r.createdAt)})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-dashed border-gray-200 dark:border-gray-700 p-6 rounded-3xl flex flex-col items-center justify-center text-center opacity-70",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded-2xl mb-3",children:e.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-[0.2em]",children:"OFFICIAL DATASHEET"}),e.jsx("span",{className:"text-[9px] text-gray-400 mt-1",children:"System Generated Record"})]})]})]})]})]})})};export{M as S};
