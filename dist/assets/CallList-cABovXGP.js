import{r,A as Na,w as Z,aa as E,v as S,f as I,b as j,c as v,y as i,j as e,P as wa,E as Ca,B as o,x,H as $e,a9 as He,m as Sa,T as Ia,o as Pa,p as Ke,q as m,s as Ma,M as G,I as w,X as Ve,Y as qe,a6 as Aa,n as Da}from"./index-BNEGGE57.js";import{R as Fa,P as Ea}from"./RangeDatePicker-quGvPJGm.js";import{S as La}from"./file-BKwY2KsR.js";import{S as Ye}from"./chevron-down-BH7m1aFk.js";import{S as Ra}from"./chevron-up-D72zhKQL.js";import"./index-B_JH6AFf.js";import"./calender-line-DQbsZUHO.js";const Ta=({className:L})=>e.jsx("svg",{className:L,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.04175 9.37363C3.04175 5.87693 5.87711 3.04199 9.37508 3.04199C12.8731 3.04199 15.7084 5.87693 15.7084 9.37363C15.7084 12.8703 12.8731 15.7053 9.37508 15.7053C5.87711 15.7053 3.04175 12.8703 3.04175 9.37363ZM9.37508 1.54199C5.04902 1.54199 1.54175 5.04817 1.54175 9.37363C1.54175 13.6991 5.04902 17.2053 9.37508 17.2053C11.2674 17.2053 13.003 16.5344 14.357 15.4176L17.177 18.238C17.4699 18.5309 17.9448 18.5309 18.2377 18.238C18.5306 17.9451 18.5306 17.4703 18.2377 17.1774L15.418 14.3573C16.5365 13.0033 17.2084 11.2669 17.2084 9.37363C17.2084 5.04817 13.7011 1.54199 9.37508 1.54199Z",fill:"currentColor"})});function Wa(){const L=()=>{const a=new Date,t=new Date(a.getFullYear(),a.getMonth(),1),s=new Date(a.getFullYear(),a.getMonth()+1,0);return[t,s]},{user:u,selectedBrand:pe}=r.useContext(Na),[he,be]=r.useState([]),[We,ye]=r.useState(!0),[Q,fe]=r.useState(""),{isOpen:Je,openModal:je,closeModal:X}=Z(),{isOpen:Ze,openModal:Ge,closeModal:ee}=Z(),{isOpen:Qe,openModal:Xe,closeModal:ae}=Z(),{isOpen:ea,openModal:aa,closeModal:se}=Z(),[R,sa]=r.useState(!1),[P,T]=r.useState(""),[M,z]=r.useState(""),[A,_]=r.useState(""),[U,O]=r.useState(""),[te,B]=r.useState(""),[re,$]=r.useState(""),[H,K]=r.useState(""),[V,ta]=r.useState([]),[le,ne]=r.useState(null),[F,g]=r.useState(!1),[c,k]=r.useState([]),[ie,ra]=r.useState(null),[de,ve]=r.useState(""),[oe,ke]=r.useState(""),[ce,Ne]=r.useState(""),[p,b]=r.useState(1),[D,la]=r.useState(50),[N,na]=r.useState({totalItems:0,totalPages:1,currentPage:1}),[y,we]=r.useState(L()),[Ce,ia]=r.useState([]),[xe,da]=r.useState(""),[q,Se]=r.useState(""),[Ie,za]=r.useState("createdAt"),[Pe,_a]=r.useState("desc"),[me,oa]=r.useState(""),[Y,Me]=r.useState(""),{summaryData:ca,completionRate:Ua}=r.useMemo(()=>{const a={};E.forEach(l=>{a[l.value.toLowerCase()]={count:0,color:l.color,label:l.label}});let t=0,s=0;Ce.forEach(l=>{const h=(l._id||"pending").toLowerCase();t+=l.count,h==="pending"&&(s=l.count),a[h]?a[h].count=l.count:a[h]={count:l.count,color:"#A3A3A3",label:l._id||"Pending"}});const n=t>0?Math.round((t-s)/t*100):0;return{summaryData:Object.values(a),completionRate:n}},[Ce]);r.useEffect(()=>{const a=setTimeout(()=>{oa(Q),b(1)},500);return()=>clearTimeout(a)},[Q]);const Ae=S(u)||I(u);r.useEffect(()=>{C(),(S(u)||I(u))&&xa()},[u,p,D,me,y,xe,q,Y,Ie,Pe]);const xa=async()=>{try{const a=new URLSearchParams;pe&&a.append("brandId",pe._id);const t=await j.get(`${v}/users/dropdown?${a.toString()}`,{withCredentials:!0});ta(t.data.users||[])}catch(a){console.error("Error fetching users:",a)}},C=async()=>{try{ye(!0);const a=new URLSearchParams({page:p,limit:D,sortBy:Ie,sortOrder:Pe});if(me&&a.append("search",me),Y&&a.append("status",Y),y&&y.length>0){if(y[0]){const s=new Date(y[0]);if(s.setHours(0,0,0,0),a.append("startDate",s.toISOString()),!y[1]){const n=new Date(y[0]);n.setHours(23,59,59,999),a.append("endDate",n.toISOString())}}if(y[1]){const s=new Date(y[1]);s.setHours(23,59,59,999),a.append("endDate",s.toISOString())}}xe&&a.append("creator",xe),q&&a.append("assignedTo",q);const t=await j.get(`${v}/call-lists?${a.toString()}`,{withCredentials:!0});be(t.data.callLists),na(t.data.pagination),ia(t.data.stats||[])}catch(a){console.error("Error fetching call lists:",a),i.error("Failed to load call lists.")}finally{ye(!1),k([])}},ue=()=>{T(""),z(""),_(""),O(""),B(""),$(""),K(""),ne(null)},ma=async()=>{var a,t;if(!P&&!M&&!A){i.error("Please fill at least one field (Name, Phone, or Social Media ID).");return}try{g(!0);const s=await j.post(`${v}/call-lists`,{name:P,phoneNumber:M,socialMediaId:A,remarks:U,assignedTo:H},{withCredentials:!0});i.success("Call list entry added successfully!"),C(),X(),ue()}catch(s){console.error("Error adding call list:",s),i.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to add entry.")}finally{g(!1)}},ua=a=>{var t;ne(a),T(a.name||""),z(a.phoneNumber||""),_(a.socialMediaId||""),O(a.remarks||""),B(a.source||""),$(a.purpose||""),K(((t=a.assignedTo)==null?void 0:t._id)||""),Ge()},ga=async()=>{var a,t;if(!P&&!M&&!A){i.error("Please fill at least one field (Name, Phone, or Social Media ID).");return}try{g(!0);const s=await j.put(`${v}/call-lists/${le._id}`,{name:P,phoneNumber:M,socialMediaId:A,remarks:U,source:te,purpose:re,assignedTo:H||null},{withCredentials:!0});i.success("Call list entry updated successfully!"),be(he.map(n=>n._id===le._id?s.data.callList:n)),ee(),ue()}catch(s){console.error("Error updating call list:",s),i.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to update entry.")}finally{g(!1)}},pa=a=>{ne(a),Xe()},ha=async()=>{var a,t;try{await j.delete(`${v}/call-lists/${le._id}`,{withCredentials:!0}),i.success("Call list entry deleted successfully!"),C(),ae(),ue()}catch(s){console.error("Error deleting call list:",s),i.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to delete entry.")}},ba=async(a,t)=>{var s,n;try{await j.patch(`${v}/call-lists/${a}/status`,{status:t},{withCredentials:!0}),i.success("Status updated successfully!"),C()}catch(l){console.error("Error updating status:",l),i.error(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to update status.")}},ya=()=>{c.length===f.length&&f.length>0?k([]):k(f.map(a=>a._id))},De=(a,t,s)=>{if(s!=null&&s.shiftKey&&ie!==null&&t!==void 0){const n=Math.min(ie,t),l=Math.max(ie,t),h=f.slice(n,l+1).map(J=>J._id),W=[...new Set([...c,...h])];k(W)}else c.includes(a)?k(c.filter(n=>n!==a)):k([...c,a]);t!==void 0&&ra(t)},fa=async()=>{var a,t;if(c.length===0){i.error("Please select entries to update.");return}if(!de&&!oe&&!ce){i.error("Please select a user, or enter source/purpose to update.");return}try{g(!0);const s=await j.post(`${v}/call-lists/bulk-assign`,{ids:c,assignedTo:de,source:oe,purpose:ce},{withCredentials:!0});i.success(s.data.message||"Bulk update successful!"),C(),ve(""),ke(""),Ne("")}catch(s){console.error("Error in bulk update:",s),i.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to perform bulk update.")}finally{g(!1)}},ja=async()=>{var a,t;if(c.length===0){i.error("Please select entries to delete.");return}if(window.confirm(`Are you sure you want to delete ${c.length} entries? This action cannot be undone.`))try{g(!0),await j.post(`${v}/call-lists/bulk-delete`,{ids:c},{withCredentials:!0}),i.success("Bulk delete successful!"),k([]),C()}catch(s){console.error("Error in bulk delete:",s),i.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to perform bulk delete.")}finally{g(!1)}},f=he,Fe=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",Ee=a=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(o,{size:"sm",variant:"outline",onClick:()=>ua(a),className:"h-8 px-2.5 text-xs border-gray-200 dark:border-gray-700 hover:text-brand-500",children:"Edit"}),Ae&&e.jsx(o,{size:"sm",variant:"outline",className:"h-8 px-2 text-red-500 border-gray-200 dark:border-gray-700 hover:bg-red-50 dark:hover:bg-red-500/10",onClick:()=>pa(a),children:e.jsx(He,{className:"size-4"})})]}),Le=a=>{const t=E.find(s=>s.value===a.status)||E[0];return e.jsxs("div",{className:"flex flex-col gap-1.5 min-w-[130px]",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider w-fit text-white shadow-sm",style:{backgroundColor:t.color||"#A3A3A3"},children:t.label}),e.jsxs("div",{className:"relative group",children:[e.jsx("select",{className:"w-full text-[11px] font-medium bg-gray-50/50 dark:bg-white/[0.03] border border-gray-200 dark:border-gray-700 rounded-md px-2 py-1 outline-none focus:border-brand-500 appearance-none cursor-pointer transition-all hover:bg-white dark:hover:bg-gray-800",value:a.status||"pending",onChange:s=>ba(a._id,s.target.value),children:E.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:e.jsx(Ye,{className:"size-3"})})]})]})};return e.jsxs("div",{className:"",children:[e.jsx(wa,{title:"Cold Call list | DreamCRM",description:"Manage customer contact information"}),e.jsx(Ca,{pageTitle:"Manage Your Cold Call Lists Here"}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white px-4 pb-3 pt-4 dark:border-gray-800 dark:bg-white/[0.03] sm:px-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between border-b border-gray-100 dark:border-gray-800 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white/90",children:"Cold Call List"}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["Total: ",N.totalItems," records"]}),c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300 dark:text-gray-700 font-light",children:"|"}),e.jsxs("p",{className:"text-xs text-brand-500 font-medium",children:[c.length," selected"]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:justify-end",children:[e.jsx("div",{className:"w-full sm:w-52 group",children:e.jsx(Fa,{value:y,onChange:a=>{we(a),b(1)},placeholder:"Filter dates"})}),e.jsx(o,{size:"sm",variant:"outline",onClick:()=>sa(!R),className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 hover:border-brand-500 text-gray-600 dark:text-gray-400",startIcon:R?e.jsx(Ra,{className:"size-4"}):e.jsx(Ye,{className:"size-4"}),children:"Filters"}),e.jsx(o,{size:"sm",variant:"outline",onClick:aa,className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 hover:border-brand-500 text-gray-600 dark:text-gray-400",startIcon:e.jsx(La,{className:"size-4"}),children:"Import"}),e.jsx(o,{size:"sm",variant:"primary",onClick:je,className:"h-[34px] px-4 font-bold tracking-tight shadow-md hover:shadow-lg transition-all",children:"Add New Entry"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-5 gap-y-2 mt-3 pt-3",children:[e.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[e.jsx("svg",{className:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"Efficiency:"]}),ca.map((a,t)=>e.jsxs("div",{className:"flex items-center gap-1.5 group transition-all",children:[e.jsx("span",{className:"size-1.5 rounded-full shadow-sm group-hover:scale-125 transition-transform",style:{backgroundColor:a.color||"#A3A3A3"}}),e.jsxs("span",{className:"text-[11px] font-medium text-gray-500 group-hover:text-gray-700 dark:text-gray-400 dark:group-hover:text-gray-200 transition-colors uppercase tracking-tight",children:[a.label,":"]}),e.jsx("span",{className:"text-xs font-bold text-gray-800 dark:text-white",children:a.count})]},t))]})]}),R&&e.jsxs("div",{className:"p-4 bg-gray-50/50 dark:bg-white/[0.02] rounded-xl border border-gray-100 dark:border-gray-800 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 animate-in fade-in slide-in-from-top-2 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest mb-1.5 ml-0.5",children:"Quick Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Name, phone, source...",value:Q,onChange:a=>{fe(a.target.value),b(1)},className:"w-full h-10 rounded-lg border border-gray-200 bg-white pl-10 pr-4 text-sm text-gray-700 focus:border-brand-500 outline-none transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300"})]})]}),e.jsxs("div",{children:[e.jsx(x,{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest mb-1.5 ml-0.5",children:"Assignee"}),e.jsx($e,{options:[{value:"",label:"All Assignees"},{value:"unassigned",label:"Unassigned"},...V.map(a=>({value:a._id,label:a.fullName}))],value:q,onChange:a=>{Se(a),b(1)},placeholder:"Filter by assignee"})]}),e.jsxs("div",{children:[e.jsx(x,{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest mb-1.5 ml-0.5",children:"Status"}),e.jsx($e,{options:[{value:"",label:"All Statuses"},...E.map(a=>({value:a.value,label:a.label}))],value:Y,onChange:a=>{Me(a),b(1)},placeholder:"Filter by status"})]}),e.jsx("div",{className:"flex items-end pb-0.5",children:e.jsx(o,{variant:"outline",onClick:()=>{we(L()),da(""),Se(""),Me(""),fe(""),b(1)},className:"w-full h-10 border-gray-200 hover:bg-white dark:border-gray-700 dark:hover:bg-gray-800 rounded-lg text-xs font-medium text-gray-500",startIcon:e.jsx(He,{className:"size-4"}),children:"Reset Filters"})})]}),e.jsxs("div",{className:"space-y-6",children:[c.length>0&&e.jsxs("div",{className:"p-4 bg-brand-50/50 dark:bg-brand-500/5 border border-brand-100 dark:border-brand-500/20 rounded-xl flex flex-col md:flex-row items-center justify-between gap-4 animate-in fade-in slide-in-from-top-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center size-8 bg-brand-500 text-white text-sm font-bold rounded-lg shadow-lg shadow-brand-500/20",children:c.length}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"block text-sm font-semibold text-gray-800 dark:text-white",children:[c.length," Entries Selected"]}),e.jsx("button",{onClick:()=>k([]),className:"text-xs text-brand-500 hover:text-brand-600 font-medium transition-colors",children:"Clear Selection"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-end gap-3 w-full md:w-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-500 font-medium mb-1 block uppercase tracking-wider",children:"Source"}),e.jsx("input",{type:"text",value:oe,onChange:a=>ke(a.target.value),placeholder:"e.g. LinkedIn",className:"w-full sm:w-[120px] rounded-lg border border-gray-300 bg-white px-3 py-2 text-xs text-gray-700 focus:border-brand-500 focus:ring focus:ring-brand-200 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 outline-none shadow-sm transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-500 font-medium mb-1 block uppercase tracking-wider",children:"Purpose"}),e.jsx("input",{type:"text",value:ce,onChange:a=>Ne(a.target.value),placeholder:"e.g. Sales",className:"w-full sm:w-[120px] rounded-lg border border-gray-300 bg-white px-3 py-2 text-xs text-gray-700 focus:border-brand-500 focus:ring focus:ring-brand-200 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 outline-none shadow-sm transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-500 font-medium mb-1 block uppercase tracking-wider",children:"Assign To"}),e.jsx("div",{className:"relative sm:min-w-[150px]",children:e.jsxs("select",{value:de,onChange:a=>ve(a.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-xs text-gray-700 focus:border-brand-500 focus:ring focus:ring-brand-200 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 outline-none shadow-sm transition-all",children:[e.jsx("option",{value:"",children:"Select User"}),e.jsx("option",{value:"unassign",children:"Unassign"}),V.map(a=>e.jsx("option",{value:a._id,children:a.fullName},a._id))]})})]}),e.jsx(o,{variant:"primary",loading:F,onClick:fa,className:"whitespace-nowrap shadow-lg shadow-brand-500/20 h-[34px] px-4 text-xs",children:"Update"}),Ae&&e.jsx(o,{variant:"outline",loading:F,onClick:ja,className:"whitespace-nowrap h-[34px] px-4 text-xs text-red-500 border-red-200 hover:bg-red-50",children:"Delete"})]})]}),We?e.jsx(Sa,{}):f.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 md:hidden",children:f.map((a,t)=>{var s;return e.jsxs("div",{className:"bg-white dark:bg-white/[0.03] border border-gray-100 dark:border-gray-800 rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[(S(u)||I(u))&&e.jsx("input",{type:"checkbox",className:"size-5 rounded border-gray-300 text-brand-500 focus:ring-brand-500 cursor-pointer",checked:c.includes(a._id),onChange:n=>De(a._id,t,n)}),e.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["#",t+1]}),e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:a.name||"Unnamed"})]}),Le(a)]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[a.phoneNumber&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Phone:"}),e.jsx("a",{href:`tel:${a.phoneNumber}`,className:"text-brand-500 hover:underline font-medium",children:a.phoneNumber})]}),a.socialMediaId&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Social:"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a.socialMediaId})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Assigned:"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:((s=a.assignedTo)==null?void 0:s.fullName)||"Unassigned"})]}),a.source&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Source:"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a.source})]}),a.purpose&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Purpose:"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a.purpose})]}),a.remarks&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-white/[0.02] rounded text-xs text-gray-600 dark:text-gray-400 italic",children:['"',a.remarks,'"']})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-50 dark:border-gray-800",children:[e.jsx("span",{className:"text-[10px] text-gray-400",children:Fe(a.createdAt)}),Ee(a)]})]},a._id)})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs(Ia,{className:"min-w-[1100px]",children:[e.jsx(Pa,{className:"border-gray-200 dark:border-gray-700 border-y bg-gray-50/50 dark:bg-gray-800/20",children:e.jsxs(Ke,{children:[(S(u)||I(u))&&e.jsx(m,{isHeader:!0,className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",className:"size-4 rounded border-gray-300 text-brand-500 focus:ring-brand-500 cursor-pointer transition-all",checked:c.length===f.length&&f.length>0,onChange:ya})}),e.jsx(m,{isHeader:!0,className:"py-3 px-4 font-bold text-gray-700 text-start text-[11px] dark:text-gray-300 uppercase tracking-widest w-16",children:"#"}),e.jsx(m,{isHeader:!0,className:"py-3 px-4 font-bold text-gray-700 text-start text-[11px] dark:text-gray-300 uppercase tracking-widest min-w-[220px]",children:"Contact Details"}),e.jsx(m,{isHeader:!0,className:"py-3 px-4 font-bold text-gray-700 text-start text-[11px] dark:text-gray-300 uppercase tracking-widest min-w-[120px]",children:"Assigned To"}),e.jsx(m,{isHeader:!0,className:"py-3 px-4 font-bold text-gray-700 text-start text-[11px] dark:text-gray-300 uppercase tracking-widest min-w-[140px]",children:"Source / Purpose"}),e.jsx(m,{isHeader:!0,className:"py-3 px-4 font-bold text-gray-700 text-start text-[11px] dark:text-gray-300 uppercase tracking-widest min-w-[200px]",children:"Remarks"}),e.jsx(m,{isHeader:!0,className:"py-3 px-4 font-bold text-gray-700 text-start text-[11px] dark:text-gray-300 uppercase tracking-widest min-w-[140px]",children:"Status"}),e.jsx(m,{isHeader:!0,className:"py-3 px-4 font-bold text-gray-700 text-start text-[11px] dark:text-gray-300 uppercase tracking-widest min-w-[100px]",children:"Actions"})]})}),e.jsx(Ma,{className:"divide-y divide-gray-100 dark:divide-gray-800",children:f.map((a,t)=>{var s;return e.jsxs(Ke,{className:"transition-colors hover:bg-gray-50/50 dark:hover:bg-white/[0.02] even:bg-gray-50/40 even:dark:bg-white/[0.01]",children:[(S(u)||I(u))&&e.jsx(m,{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",className:"size-4 rounded border-gray-300 text-brand-500 focus:ring-brand-500 cursor-pointer transition-all",checked:c.includes(a._id),onChange:n=>De(a._id,t,n)})}),e.jsx(m,{className:"py-3 px-4 text-gray-400 text-xs font-bold leading-none",children:(p-1)*D+t+1}),e.jsx(m,{className:"py-3 px-4",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-tighter",children:Fe(a.createdAt)}),e.jsx("div",{className:"text-gray-900 text-sm font-bold dark:text-white leading-tight",children:a.name||"Unnamed"}),a.phoneNumber&&e.jsxs("a",{href:`tel:${a.phoneNumber}`,className:"text-brand-600 hover:text-brand-700 hover:underline font-semibold text-xs flex items-center gap-1.5 mt-0.5",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),a.phoneNumber]})]})}),e.jsx(m,{className:"py-3 px-4 text-gray-600 dark:text-gray-400 text-xs font-medium",children:((s=a.assignedTo)==null?void 0:s.fullName)||"Unassigned"}),e.jsx(m,{className:"py-3 px-4 text-xs",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.source&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Src:"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:a.source})]}),a.purpose&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Purp:"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:a.purpose})]})]})}),e.jsx(m,{className:"py-3 px-4 text-xs text-gray-600 dark:text-gray-400 italic",children:e.jsx("div",{className:"max-w-[200px] truncate",title:a.remarks,children:a.remarks||"-"})}),e.jsx(m,{className:"py-3 px-4",children:Le(a)}),e.jsx(m,{className:"py-3 px-4",children:Ee(a)})]},a._id)})})]})}),N.totalPages>1&&e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row items-center justify-between gap-4 border-t border-gray-100 dark:border-gray-800 pt-6",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",e.jsx("span",{className:"font-medium",children:(p-1)*D+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(p*D,N.totalItems)})," of ",e.jsx("span",{className:"font-medium",children:N.totalItems})," results"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:D,onChange:a=>{la(Number(a.target.value)),b(1)},className:"h-8 rounded-lg border border-gray-300 bg-white px-2 text-sm text-gray-700 focus:border-brand-500 focus:ring focus:ring-brand-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 outline-none transition-all",children:[e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:100,children:"100 per page"}),e.jsx("option",{value:500,children:"500 per page"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{size:"sm",variant:"outline",disabled:p===1,onClick:()=>b(a=>Math.max(1,a-1)),children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(N.totalPages)].map((a,t)=>{const s=t+1;return s===1||s===N.totalPages||s>=p-1&&s<=p+1?e.jsx("button",{onClick:()=>b(s),className:`size-8 rounded-lg text-sm font-medium transition-colors ${p===s?"bg-brand-500 text-white":"text-gray-500 hover:bg-gray-100 dark:hover:bg-white/5"}`,children:s},s):s===p-2||s===p+2?e.jsx("span",{className:"px-1 text-gray-400",children:"..."},s):null})}),e.jsx(o,{size:"sm",variant:"outline",disabled:p===N.totalPages,onClick:()=>b(a=>Math.min(N.totalPages,a+1)),children:"Next"})]})]})]})]}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No call list entries found."}),e.jsx(o,{variant:"outline",onClick:je,children:"Add your first entry"})]})]})]}),e.jsxs(G,{isOpen:Je,onClose:X,className:"max-w-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white/90 mb-4",children:"Add Call List Entry"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Name"}),e.jsx(w,{id:"name",type:"text",value:P,onChange:a=>T(a.target.value),placeholder:"Enter name (optional)"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Phone Number"}),e.jsx(Ve,{selectPosition:"end",countries:qe,placeholder:"+91 98765 43210",value:M,onChange:z})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"socialMediaId",children:"Social Media ID"}),e.jsx(w,{id:"socialMediaId",type:"text",value:A,onChange:a=>_(a.target.value),placeholder:"Instagram, Facebook, etc. (optional)"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"source",children:"Source"}),e.jsx(w,{id:"source",type:"text",value:te,onChange:a=>B(a.target.value),placeholder:"e.g. LinkedIn, Referral (optional)"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"purpose",children:"Purpose"}),e.jsx(w,{id:"purpose",type:"text",value:re,onChange:a=>$(a.target.value),placeholder:"e.g. Sales, Inquiry (optional)"})]}),(S(u)||I(u))&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"assignedTo",children:"Assign To"}),e.jsxs("select",{id:"assignedTo",value:H,onChange:a=>K(a.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-brand-500 focus:ring focus:ring-brand-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 shadow-theme-xs outline-none",children:[e.jsx("option",{value:"",children:"Select User (Optional)"}),V.map(a=>e.jsx("option",{value:a._id,children:a.fullName},a._id))]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"remarks",children:"Remarks"}),e.jsx("textarea",{id:"remarks",value:U,onChange:a=>O(a.target.value),placeholder:"Add any notes (optional)",rows:3,className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring focus:ring-blue-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 shadow-theme-xs"})]}),e.jsxs("div",{className:"flex gap-3 justify-end mt-4",children:[e.jsx(o,{variant:"outline",onClick:X,children:"Cancel"}),e.jsx(o,{variant:"primary",onClick:ma,loading:F,children:"Add Entry"})]})]})]}),e.jsxs(G,{isOpen:Ze,onClose:ee,className:"max-w-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white/90 mb-4",children:"Edit Call List Entry"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"editName",children:"Name"}),e.jsx(w,{id:"editName",type:"text",value:P,onChange:a=>T(a.target.value),placeholder:"Enter name (optional)"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Phone Number"}),e.jsx(Ve,{selectPosition:"end",countries:qe,placeholder:"+91 98765 43210",value:M,onChange:z})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"editSocialMediaId",children:"Social Media ID"}),e.jsx(w,{id:"editSocialMediaId",type:"text",value:A,onChange:a=>_(a.target.value),placeholder:"Instagram, Facebook, etc. (optional)"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"editSource",children:"Source"}),e.jsx(w,{id:"editSource",type:"text",value:te,onChange:a=>B(a.target.value),placeholder:"e.g. LinkedIn, Referral (optional)"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"editPurpose",children:"Purpose"}),e.jsx(w,{id:"editPurpose",type:"text",value:re,onChange:a=>$(a.target.value),placeholder:"e.g. Sales, Inquiry (optional)"})]}),(S(u)||I(u))&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"editAssignedTo",children:"Assign To"}),e.jsxs("select",{id:"editAssignedTo",value:H,onChange:a=>K(a.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-brand-500 focus:ring focus:ring-brand-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 shadow-theme-xs outline-none",children:[e.jsx("option",{value:"",children:"Select User (Optional)"}),V.map(a=>e.jsx("option",{value:a._id,children:a.fullName},a._id))]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"editRemarks",children:"Remarks"}),e.jsx("textarea",{id:"editRemarks",value:U,onChange:a=>O(a.target.value),placeholder:"Add any notes (optional)",rows:3,className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring focus:ring-blue-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 shadow-theme-xs"})]}),e.jsxs("div",{className:"flex gap-3 justify-end mt-4",children:[e.jsx(o,{variant:"outline",onClick:ee,children:"Cancel"}),e.jsx(o,{variant:"primary",onClick:ga,loading:F,children:"Update Entry"})]})]})]}),e.jsxs(G,{isOpen:Qe,onClose:ae,className:"max-w-md p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white/90 mb-2",children:"Confirm Delete"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Are you sure you want to delete this call list entry?"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"outline",onClick:ae,children:"Cancel"}),e.jsx(o,{variant:"danger",onClick:ha,children:"Delete"})]})]}),e.jsxs(G,{isOpen:ea,onClose:se,className:"max-w-xl p-0 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-800",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white/90",children:"Import Call List"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Upload a CSV file to bulk import call list entries."})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-brand-50/50 dark:bg-brand-500/5 p-4 rounded-xl border border-brand-100 dark:border-brand-500/20 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-brand-700 dark:text-brand-400",children:"Step 1: Get the template"}),e.jsx("p",{className:"text-xs text-brand-600/80 dark:text-brand-400/60 mt-0.5",children:"Use our CSV template to ensure correct data formatting."})]}),e.jsx(o,{size:"sm",variant:"outline",className:"bg-white dark:bg-gray-900",onClick:()=>{const s="data:text/csv;charset=utf-8,"+[["Name","Mobile Number","Source","Purpose","Remarks"],...[["John Doe","9876543210","LinkedIn","Sales","Very interested"],["Jane Smith","9123456789","Referral","Inquiry","Follow up next week"]]].map(h=>h.join(",")).join(`
`),n=encodeURI(s),l=document.createElement("a");l.setAttribute("href",n),l.setAttribute("download","call_list_template.csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l)},children:"Download Sample"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Step 2: Upload your file"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-800 rounded-2xl p-10 flex flex-col items-center justify-center text-center hover:border-brand-300 dark:hover:border-brand-800 transition-colors cursor-pointer group",onClick:()=>document.getElementById("csv-upload-calllist").click(),children:[e.jsx("div",{className:"size-12 rounded-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center mb-4 group-hover:bg-brand-50 dark:group-hover:bg-brand-500/10 transition-colors",children:e.jsx(Aa,{className:"size-6 text-gray-400 group-hover:text-brand-500 rotate-180"})}),e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white/90",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Only CSV files are supported"}),e.jsx("input",{type:"file",id:"csv-upload-calllist",className:"hidden",accept:".csv",onChange:a=>{const t=a.target.files[0];if(t){if(t.type!=="text/csv"&&!t.name.endsWith(".csv")){i.error("Please upload a valid CSV file");return}i.info(`Selected ${t.name}`)}}})]})]}),e.jsxs("div",{className:"flex gap-3 p-4 bg-gray-50 dark:bg-white/[0.02] rounded-xl border border-gray-100 dark:border-gray-800",children:[e.jsx("div",{className:"size-5 rounded-full bg-blue-500 flex items-center justify-center shrink-0 mt-0.5",children:e.jsx("span",{className:"text-[10px] text-white font-bold",children:"i"})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Important Notes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Fields: Name, Mobile number, Source, Purpose, Remarks (Name and number are optional)."}),e.jsx("li",{children:"At least one identifying or data field (Name, Phone, Social Media ID, Source, or Purpose) must be present."}),e.jsx("li",{children:"Remarks can be left empty."})]})]})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-white/[0.02] border-t border-gray-100 dark:border-gray-800 flex items-center justify-end gap-3",children:[e.jsx(o,{variant:"outline",onClick:se,children:"Cancel"}),e.jsx(o,{variant:"primary",loading:F,onClick:()=>{const a=document.getElementById("csv-upload-calllist");if(a.files.length===0){i.error("Please select a file first");return}g(!0);const t=a.files[0];Ea.parse(t,{header:!0,skipEmptyLines:!0,complete:async s=>{var Ue,Oe;const n=(d,va)=>{if(!d)return null;const ka=d.map(ge=>ge.toLowerCase().trim());for(const ge of va){const Be=ka.indexOf(ge.toLowerCase());if(Be!==-1)return d[Be]}return null},l=s.meta.fields||[];console.log("CSV Headers:",l);const h=n(l,["Name","Full Name","Lead Name"]),W=n(l,["Phone Number","Phone","Mobile Number","Mobile","Contact"]),J=n(l,["Social Media ID","Social Media","Social","Instagram","Facebook"]),Re=n(l,["Source","Src"]),Te=n(l,["Purpose","Purp"]),ze=n(l,["Remarks","Note","Comment"]),_e=s.data.map(d=>({name:h?d[h]:"",phoneNumber:W?d[W]:"",socialMediaId:J?d[J]:"",source:Re?d[Re]:"",purpose:Te?d[Te]:"",remarks:ze?d[ze]:""})).filter(d=>d.name||d.phoneNumber||d.socialMediaId||d.source||d.purpose);if(_e.length===0){i.error("No valid entries found in file. Check Name, Phone, or Social Media ID columns."),g(!1);return}try{const d=await j.post(`${v}/call-lists/import`,{entries:_e},{withCredentials:!0});i.success(d.data.message||"Import successful!"),C(),se()}catch(d){console.error("Import failed:",d),i.error(((Oe=(Ue=d.response)==null?void 0:Ue.data)==null?void 0:Oe.message)||"Import failed. Please try again.")}finally{g(!1)}},error:s=>{console.error("CSV Parse Error:",s),i.error("Failed to parse CSV file."),g(!1)}})},children:"Confirm Import"})]})]}),e.jsx(Da,{position:"top-center",autoClose:3e3,className:"!z-[999999]",style:{zIndex:999999}})]})}export{Wa as default};
