import{r as p,j as e,P as N,C as f,z as o,I as u,D,E as w,y as t,c as q,d as S}from"./index-WGrFNeZR.js";const C=()=>{const[a,m]=p.useState({employeeName:"",employeeId:"",leaveType:"casual",startDate:"",endDate:"",reason:""}),[x,y]=p.useState(null),i=d=>{const{name:l,value:n}=d.target;m(c=>({...c,[l]:n}))},v=(d,l)=>{m(n=>({...n,[d]:l}))},h=()=>{m({employeeName:"",employeeId:"",leaveType:"casual",startDate:"",endDate:"",reason:""})},j=()=>{y(null),h()},k=async d=>{var b,g;if(d.preventDefault(),!a.employeeName||!a.employeeId||!a.leaveType||!a.startDate||!a.endDate||!a.reason){t.error("Please fill in all required fields");return}const l=new Date(a.startDate),n=new Date(a.endDate),c=new Date;if(c.setHours(0,0,0,0),l>n){t.error("Start date cannot be after end date");return}if(l<c){t.error("Start date cannot be in the past");return}try{const s={employeeName:a.employeeName.trim(),employeeId:a.employeeId.trim(),leaveType:a.leaveType,startDate:l.toISOString(),endDate:n.toISOString(),reason:a.reason.trim()},r=await q.post(`${S}/leaves/create`,s,{timeout:1e4});r.data&&r.data.ticketNumber?(y(r.data.ticketNumber),t.success(r.data.message||"Leave request submitted successfully!")):r.data&&r.data.message?t.success(r.data.message||"Leave request submitted successfully!"):t.success("Leave request submitted successfully!"),h()}catch(s){if(console.error("Error submitting leave request:",s),s.response){const r=((b=s.response.data)==null?void 0:b.message)||((g=s.response.data)!=null&&g.errors?s.response.data.errors.join(", "):"Failed to submit leave request");t.error(r)}else s.request?t.error("Network error. Please check your connection."):t.error("Failed to submit leave request. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Leave Request Portal - CRM"}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx(f,{title:"Leave Request Portal",children:x?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Leave Request Submitted Successfully!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Your leave request has been submitted. Please save your ticket number for future reference."})]}),e.jsxs("div",{className:"bg-brand-50 dark:bg-brand-500/20 border-2 border-brand-200 dark:border-brand-800 rounded-lg p-6 mb-6",children:[e.jsx("p",{className:"text-sm text-brand-800 dark:text-brand-200 mb-2",children:"Your Ticket Number"}),e.jsx("p",{className:"text-3xl font-bold text-brand-500 dark:text-brand-400 font-mono tracking-wider",children:x})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Important:"})," Please save this ticket number. You can use it to check the status of your leave request."]})}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("a",{href:`/leave-status-check?ticket=${x}`,className:"px-6 py-2 bg-brand-500 text-white rounded-md hover:bg-brand-600",children:"Check Status Now"}),e.jsx("button",{onClick:j,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",children:"Submit Another Request"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Please fill out the form below to submit your leave request. All fields marked with * are required."}),e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"employeeName",children:"Employee Name *"}),e.jsx(u,{type:"text",id:"employeeName",name:"employeeName",value:a.employeeName,onChange:i,required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"employeeId",children:"Employee ID *"}),e.jsx(u,{type:"text",id:"employeeId",name:"employeeId",value:a.employeeId,onChange:i,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"leaveType",children:"Leave Type *"}),e.jsx(D,{options:[{value:"casual",label:"Casual Leave"},{value:"sick",label:"Sick Leave"},{value:"annual",label:"Annual Leave"},{value:"maternity",label:"Maternity Leave"},{value:"paternity",label:"Paternity Leave"}],value:a.leaveType,onChange:d=>v("leaveType",d)})]}),e.jsx("div",{})," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"startDate",children:"Start Date *"}),e.jsx(u,{type:"date",id:"startDate",name:"startDate",value:a.startDate,onChange:i,required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"endDate",children:"End Date *"}),e.jsx(u,{type:"date",id:"endDate",name:"endDate",value:a.endDate,onChange:i,required:!0})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"reason",children:"Reason for Leave *"}),e.jsx("textarea",{id:"reason",name:"reason",value:a.reason,onChange:i,rows:"4",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-3 focus:ring-brand-500/20 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 bg-transparent text-gray-800 focus:border-brand-300 dark:border-gray-700 dark:focus:border-brand-800 rounded-lg shadow-theme-xs",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"reset",onClick:h,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",children:"Reset"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-500 text-white rounded-md hover:bg-brand-600",children:"Submit Request"})]})]})}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Already submitted a request?"," ",e.jsx("a",{href:"/leave-status-check",className:"text-brand-500 dark:text-brand-400 hover:underline",children:"Check your leave status"})]})})]})})})})}),e.jsx(w,{position:"top-center",className:"!z-[999999]",style:{zIndex:999999}})]})};export{C as default};
